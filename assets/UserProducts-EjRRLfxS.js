import{_ as P,m,a as E,r as l,o as c,c as r,d as n,b as t,w as _,F as h,u as g,t as p,f as k,A as I,y as T,z as V}from"./index-D--wlP2t.js";import{F as $}from"./FooterBanner-g4IOzRIk.js";import{P as U}from"./PaginationView-DUUt__Xp.js";import{S as f}from"./sweetalert2.all-JtF-AOmt.js";import{c as B}from"./cartStore-rP9IIQ6-.js";import{s as v}from"./saveStore-N7PF1gog.js";var C={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_NAME:"lucky_trip",BASE_URL:"/lucky_trip/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:b,VITE_NAME:y}=C,N={data(){return{isLoading:!1,fullpage:!0,addSave:!0,carts:[],products:[],productId:"",categories:["文化探索","休閒渡假","自然景色","親子出遊","美食之旅"],pagination:{}}},watch:{"$route.query":{handler(){this.getUserProduct()},deep:!0}},methods:{getUserProduct(){this.isLoading=!0;const{category:o=""}=this.$route.query,a=`${b}/api/${y}/products/?category=${o}`;this.$http.get(a).then(e=>{this.products=e.data.products,this.pagination=e.data.pagination,this.isLoading=!1}).catch(e=>{f.fire({icon:"error",title:e.data.message})})},getProducts(o=1){this.isLoading=!0;const a=`${b}/api/${y}/products?page=${o}`;this.$http.get(a).then(e=>{this.products=e.data.products,this.pagination=e.data.pagination,this.isLoading=!1}).catch(e=>{f.fire({title:e.data.message,icon:"error",timer:1500,showConfirmButton:!1})})},...m(B,["addToCart"]),...m(v,["addToSave","isProductSaved"])},computed:{...E(v,["savelist"])},components:{FooterBanner:$,Pagination:U},mounted(){this.getUserProduct()}},d=o=>(T("data-v-42ef5dc8"),o=o(),V(),o),R=d(()=>t("div",{class:"productBox"},[t("div",{class:"productAllbg"})],-1)),A={class:"container"},D={class:"row py-5"},F={class:"col-md-3 col-12"},M={class:"bg-white shadow border-0 rounded-3 justify-content-start text-start py-md-4 py-3 px-4 my-md-0 mt-2 mb-4"},j=d(()=>t("h3",{class:"fw-bold text-start"},"主題選擇",-1)),q=d(()=>t("hr",null,null,-1)),H={class:"px-0 d-flex flex-wrap my-0 list-unstyled"},O=d(()=>t("button",{type:"button",class:"btn btn-outline-primary btn-sm me-3 text-start btnHover mb-2"},"全部行程",-1)),z={type:"button",class:"btn btn-outline-primary btn-sm me-3 text-start btnHover mb-2"},G={class:"col-md-9 col-12"},J={class:"row"},K={class:"card mb-4"},Q={class:"overflow-hidden productImg"},W=["src","alt"],X={class:"card-body"},Y={class:"card-title text-start"},Z={class:"row text-start justify-content-between align-items-center"},tt={class:"col-lg-7 col-md-12 col-6"},st={class:"text-decoration-line-through text-black-50 fs-6"},ot={class:"text-primary h5"},et=["onClick"],at=d(()=>t("button",{class:"btn btn-primary text-white",type:"submit"},"加入購物車",-1)),it=[at];function nt(o,a,e,ct,i,x){const w=l("VueLoading"),u=l("RouterLink"),L=l("Pagination"),S=l("footer-banner");return c(),r(h,null,[n(w,{active:i.isLoading,"onUpdate:active":a[0]||(a[0]=s=>i.isLoading=s),loader:"bars","can-cancel":!1,"is-full-page":i.fullpage},null,8,["active","is-full-page"]),R,t("div",A,[t("div",D,[t("div",F,[t("div",M,[j,q,t("ul",H,[t("li",null,[n(u,{to:"/products"},{default:_(()=>[O]),_:1})]),(c(!0),r(h,null,g(i.categories,s=>(c(),r("li",{class:"list-group-item",key:s},[n(u,{to:`/products?category=${s}`},{default:_(()=>[t("button",z,p(s),1)]),_:2},1032,["to"])]))),128))])])]),t("div",G,[t("div",J,[(c(!0),r(h,null,g(i.products,s=>(c(),r("div",{class:"col-md-6 d-flex",key:s.id},[t("div",K,[t("div",Q,[n(u,{to:`/product/${s.id}`},{default:_(()=>[t("img",{src:s.imageUrl,class:"card-img-top object-fit-cover",alt:s.title,style:{width:"105%"}},null,8,W)]),_:2},1032,["to"])]),t("div",X,[t("h5",Y,p(s.title),1),t("div",Z,[t("div",tt,[k(" 售價 "),t("span",st," NT "+p(s.origin_price),1),t("span",ot,"NT "+p(s.price),1)]),t("div",{class:"col-lg-5 col-md-12 col-6 text-lg-end text-md-start text-end pt-lg-0 pt-md-3 pt-0",onClick:I(rt=>o.addToCart(s.id,o.qty),["prevent"])},it,8,et)])])])]))),128))]),n(L,{pagination:i.pagination,onEmitPages:x.getProducts},null,8,["pagination","onEmitPages"])])])]),n(S)],64)}const mt=P(N,[["render",nt],["__scopeId","data-v-42ef5dc8"]]);export{mt as default};

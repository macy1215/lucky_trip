import{F as x}from"./FooterBanner-qBmz9Dnk.js";import{_ as V,m as y,a as w,r as c,o as u,c as _,b as e,d as o,w as E,F as h,u as I,t as p,A as m,e as S,D as k}from"./index-hK-5s-CT.js";import{c as v}from"./cartStore-HK1Etxbi.js";import{S as F}from"./sweetalert2.all-QUaU5Uns.js";var U={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_NAME:"lucky_trip",BASE_URL:"/lucky_trip/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:C,VITE_NAME:N}=U,T={data(){return{product:{},isLoading:!0,form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{...y(v,["addToCart","removeAllCart","removeCartItem","changeCartQty","getCart"]),isPhone(d){return/^(09)[0-9]{8}$/.test(d)?!0:"請輸入以「09」開頭的行動電話號碼"},createOrder(){const d=this.form,s=`${C}/api/${N}/order`;this.$http.post(s,{data:d}).then(r=>{F.fire({icon:"success",title:"訂單成立"}),console.log(r,this.form),this.orderId=r.data.orderId,this.$refs.form.resetForm(),this.$router.push(`/paycheck/${r.data.orderId}`),localStorage.setItem("orderId",r.data.orderId),this.getCart()}).catch(r=>{alert(r.response.data.message)})}},computed:{...w(v,["carts","status","final_total","total"])},components:{FooterBanner:x},mounted(){}},A=e("h1",null,null,-1),D={class:"container"},B={class:"row"},L={class:"col-lg-8"},R={class:"my-md-0 my-5 row justify-content-center"},M={class:"mb-4"},O=e("h3",{class:"text-start fs-3"},"聯絡資訊",-1),q={class:"mb-3 d-flex align-items-center"},P=e("h3",{class:"text-start fs-3"},"寄件地址",-1),j={class:"row"},z={class:"mb-3 col-md-6"},Q={class:"mb-3 col-md-6"},$={class:"mb-3"},G={class:"mb-3 text-start"},H=e("label",{for:"message",class:"form-label"},"備註留言",-1),J=e("div",{class:"text-end"},[e("button",{class:"btn btn-danger",type:"submit"},"送出訂單")],-1),K={class:"col-lg-4 px-md-1"},W={class:"bg-secondary bg-opacity-10 rounded-2 px-md-2 pb-md-4 pt-md-3 h-auto pt-3"},X=e("h3",{class:"my-lg-2 my-4"},"購買清單",-1),Y={class:"d-flex row mb-3 align-items-center px-4"},Z={class:"col-md-3 col-5 px-md-0"},ee=["src"],se={class:"col-md-6 col-4 text-start"},te={class:"col-md-3 col-3 text-end"},oe=e("hr",null,null,-1),le={class:"fs-3 text-end fw-bold d-flex justify-content-between px-lg-0 px-4 pb-lg-0 pb-4"},ae=e("span",null,"總計",-1);function re(d,s,r,de,t,f){const n=c("VeeField"),i=c("error-message"),b=c("VeeForm"),g=c("footer-banner");return u(),_(h,null,[A,e("div",D,[e("div",B,[e("div",L,[e("div",R,[o(b,{ref:"form",class:"col-md-10",onSubmit:f.createOrder},{default:E(({errors:l})=>[e("div",M,[O,e("div",q,[o(n,{id:"email",name:"email",type:"email",class:m(["form-control w-100",{"is-invalid":l.email}]),placeholder:"請輸入Email信箱",rules:"email|required",modelValue:t.form.user.email,"onUpdate:modelValue":s[0]||(s[0]=a=>t.form.user.email=a)},null,8,["class","modelValue"]),o(i,{name:"email",class:"invalid-feedback text-start"})])]),e("div",null,[P,e("div",j,[e("div",z,[o(n,{id:"name",name:"姓名",type:"text",class:m(["form-control",{"is-invalid":l.姓名}]),placeholder:"收件人姓名",rules:"required",modelValue:t.form.user.name,"onUpdate:modelValue":s[1]||(s[1]=a=>t.form.user.name=a)},null,8,["class","modelValue"]),o(i,{name:"姓名",class:"invalid-feedback text-start"})]),e("div",Q,[o(n,{id:"tel",name:"電話",type:"tel",class:m(["form-control",{"is-invalid":l.電話}]),placeholder:"收件人行動電話",rules:f.isPhone,modelValue:t.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=a=>t.form.user.tel=a)},null,8,["class","rules","modelValue"]),o(i,{name:"電話",class:"invalid-feedback text-start"})])])]),e("div",$,[o(n,{id:"address",name:"地址",type:"text",class:m(["form-control",{"is-invalid":l.地址}]),placeholder:"請輸入寄送地址",rules:"required",modelValue:t.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=a=>t.form.user.address=a)},null,8,["class","modelValue"]),o(i,{name:"地址",class:"invalid-feedback text-start"})]),e("div",G,[H,S(e("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[4]||(s[4]=a=>t.form.message=a)},null,512),[[k,t.form.message]])]),J]),_:1},8,["onSubmit"])])]),e("div",K,[e("div",W,[X,(u(!0),_(h,null,I(d.carts,l=>(u(),_("div",{key:l.id},[e("div",Y,[e("div",Z,[e("img",{src:l.product.imageUrl,alt:"",class:"img-fluid rounded rounded-1"},null,8,ee)]),e("div",se,p(l.product.title),1),e("div",te,"NT$"+p(l.final_total)+"元",1)])]))),128)),oe,e("div",le,[ae,e("span",null,"NT$"+p(d.final_total)+"元",1)])])])])]),o(g)],64)}const ue=V(T,[["render",re]]);export{ue as default};

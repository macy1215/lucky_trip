import{z as T,y as v,_ as V,A as k,r as p,o as i,c as r,b as c,a as t,w as h,F as u,q as m,t as d,B as I,e as f,u as C,x as R}from"./index-GM0NvpCq.js";import{F as U}from"./FooterBanner-dQj77ylT.js";import"./sweetalert2.all-uzZ3ZVsx.js";var A={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_NAME:"lucky_trip",BASE_URL:"/lucky_trip/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:b,VITE_NAME:x}=A,N=T("cartStore",{state:()=>({carts:[],final_total:0,order_total:0,total:0}),actions:{addToCart(e,o=1){console.log(e,o);const n={product_id:e,qty:o};v.post(`${b}/api/${x}/cart`,{data:n}).then(g=>{console.log(g),this.getCart(),this.$Swal.fire({title:"成功加入購物車",icon:"success",position:"top-end",timer:2e3,showConfirmButton:!1}).catch(a=>{this.$Swal.fire({icon:"error",title:a.response.data.message})})})},getCart(){v.get(`${b}/api/${x}/cart`).then(e=>{this.carts=e.data.data.carts,this.final_total=e.data.data.final_total,this.total=e.data.data.total,this.order_total=e.data.data.total,console.log("pinia cart",this.carts.product_id)})}}});var B={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_NAME:"lucky_trip",BASE_URL:"/lucky_trip/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:y,VITE_NAME:S}=B,M={data(){return{isLoading:!1,fullpage:!0,addSave:!0,carts:[],products:[],productId:"",categories:["文化探索","休閒渡假","自然景色","親子出遊","美食之旅"],areas:["北部","南部","東部"]}},watch:{"$route.query":{handler(){this.getCategories(),this.getUserProduct()},deep:!0}},methods:{getUserProduct(){this.isLoading=!0;const e=`${y}/api/${S}/products/all`;this.$http.get(e).then(o=>{this.products=o.data.products,this.isLoading=!1}).catch(o=>{this.$Swal.fire({icon:"error",title:o.response.data.message})})},getCategories(){this.isLoading=!0;const{category:e=""}=this.$route.query,o=`${y}/api/${S}/products/?category=${e}`;this.$http.get(o).then(n=>{this.products=n.data.products,this.isLoading=!1}).catch(n=>{this.$Swal.fire({icon:"error",title:n.response.data.message})})},...k(N,["addToCart"]),addToSave(){this.addSave=!this.addSave}},components:{FooterBanner:U},mounted(){this.getUserProduct()}},l=e=>(C("data-v-4c95bf82"),e=e(),R(),e),D=l(()=>t("div",{class:"productBox"},[t("div",{class:"productAllbg"})],-1)),P={class:"container"},F={class:"position-relative w-75 mx-auto"},O={class:"bg-white shadow position-relative border-0 rounded-3 py-5 justify-content-start text-start",style:{top:"-40px","padding-left":"80px","padding-right":"80px"}},j={class:"w-100 d-flex align-items-center justify-content-start"},q=l(()=>t("li",null,[t("span",{class:"fw-bold text-start"},"主題選擇"),t("span",{class:"px-4"},"|")],-1)),H=l(()=>t("button",{type:"button",class:"btn btn-outline-primary btn-sm me-3 text-start btnHover"},"全部行程",-1)),z={type:"button",class:"btn btn-outline-primary btn-sm me-3 text-start btnHover"},G={class:"container"},J={class:"row"},K={class:"card mb-4"},Q={style:{height:"250px"},class:"overflow-hidden"},W=["src","alt"],X={class:"position-relative d-flex",style:{top:"-40px",left:"12px"}},Y=["onClick"],Z=l(()=>t("span",{class:"text-white me-2"},"加入購物車",-1)),tt=[Z],et={key:0,class:"bi bi-heart fs-4 text-white"},st={key:1,class:"bi bi-heart-fill fs-4 text-white"},ot={class:"card-body"},at={class:"card-title text-start"},it={class:"text-start d-flex justify-content-between align-items-center"},rt={class:"text-decoration-line-through text-black-50 fs-6"},nt={class:"text-primary h5"},ct=l(()=>t("a",{class:"btn btn-primary text-white"},[f(" 看看行程"),t("i",{class:"bi bi-chevron-right"})],-1));function dt(e,o,n,g,a,w){const E=p("VueLoading"),_=p("RouterLink"),$=p("footer-banner");return i(),r(u,null,[c(E,{active:a.isLoading,"onUpdate:active":o[0]||(o[0]=s=>a.isLoading=s),loader:"bars","can-cancel":!1,"is-full-page":a.fullpage},null,8,["active","is-full-page"]),D,t("div",P,[t("div",F,[t("div",O,[t("ul",j,[q,t("li",null,[c(_,{to:"/products"},{default:h(()=>[H]),_:1})]),(i(!0),r(u,null,m(a.categories,s=>(i(),r("li",{class:"list-group-item",key:s},[c(_,{to:`/products?category=${s}`},{default:h(()=>[t("button",z,d(s),1)]),_:2},1032,["to"])]))),128))])])])]),t("div",G,[t("div",J,[(i(!0),r(u,null,m(a.products,s=>(i(),r("div",{class:"col-md-4",key:s.id},[t("div",K,[t("div",Q,[t("img",{src:s.imageUrl,class:"card-img-top img-influid",alt:s.title},null,8,W)]),t("div",X,[t("div",{onClick:I(L=>e.addToCart(s.id,e.qty),["prevent"])},tt,8,Y),t("div",{onClick:o[1]||(o[1]=L=>w.addToSave())},[a.addSave?(i(),r("i",et)):(i(),r("i",st))])]),t("div",ot,[t("h5",at,d(s.title),1),t("div",it,[t("div",null,[f(" 售價 "),t("span",rt," NT "+d(s.origin_price),1),t("span",nt,"NT "+d(s.price),1)]),c(_,{to:"/product/"+s.id},{default:h(()=>[ct]),_:2},1032,["to"]),f(" "+d(s.category),1)])])])]))),128))])]),c($)],64)}const ht=V(M,[["render",dt],["__scopeId","data-v-4c95bf82"]]);export{ht as default};

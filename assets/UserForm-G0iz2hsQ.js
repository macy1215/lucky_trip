import{F as V}from"./FooterBanner-xkm44LWP.js";import{_ as x,m as y,a as w,r as c,o as u,c as _,b as e,d as o,w as E,F as h,u as I,t as f,D as m,e as S,C as k}from"./index-kz5fSuqI.js";import{c as b}from"./cartStore--uJwK2H9.js";import{S as C}from"./sweetalert2.all-Racs4Xm1.js";var F={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_NAME:"lucky_trip",BASE_URL:"/lucky_trip/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:U,VITE_NAME:N}=F,T={data(){return{product:{},isLoading:!0,form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{...y(b,["addToCart","removeAllCart","removeCartItem","changeCartQty","getCart"]),isPhone(d){return/^(09)[0-9]{8}$/.test(d)?!0:"請輸入以「09」開頭的行動電話號碼"},createOrder(){const d=this.form,s=`${U}/api/${N}/order`;this.$http.post(s,{data:d}).then(r=>{C.fire({icon:"success",title:"訂單成立"}),console.log(r,this.form),this.orderId=r.data.orderId,this.$refs.form.resetForm(),this.$router.push(`/paycheck/${r.data.orderId}`),localStorage.setItem("orderId",r.data.orderId),this.getCart()}).catch(r=>{alert(r.response.data.message)})}},computed:{...w(b,["carts","status","final_total","total"])},components:{FooterBanner:V},mounted(){}},D=e("h1",null,null,-1),A={class:"container"},B={class:"row"},L={class:"col-md-8"},R=e("nav",{"aria-label":"breadcrumb"},[e("ol",{class:"breadcrumb"},[e("li",{class:"breadcrumb-item"}," 建立訂單 "),e("li",{class:"breadcrumb-item disable","aria-current":"page"}," 付款 ")])],-1),M={class:"my-5 row justify-content-center"},O={class:"mb-4"},q=e("h3",{class:"text-start fs-3"},"聯絡資訊",-1),P={class:"mb-3 d-flex align-items-center"},j=e("h3",{class:"text-start fs-3"},"寄件地址",-1),z={class:"row"},Q={class:"mb-3 col-md-6"},G={class:"mb-3 col-md-6"},H={class:"mb-3"},J={class:"mb-3 text-start"},K=e("label",{for:"message",class:"form-label"},"備註留言",-1),W=e("div",{class:"text-end"},[e("button",{class:"btn btn-danger",type:"submit"},"送出訂單")],-1),X={class:"col-md-4"},Y={class:"bg-secondary bg-opacity-10 px-md-4 pb-md-5 pt-md-3 h-auto"},Z=e("h3",null,"購買清單",-1),$={class:"d-flex row mb-3 align-items-center"},ee={class:"col-md-3"},se=["src"],te={class:"col-md-6 text-start"},oe={class:"col-md-3"},le=e("hr",null,null,-1),ae={class:"fs-3 text-end fw-bold d-flex justify-content-between"},re=e("span",null,"總計",-1);function de(d,s,r,ne,t,p){const n=c("VeeField"),i=c("error-message"),v=c("VeeForm"),g=c("footer-banner");return u(),_(h,null,[D,e("div",A,[e("div",B,[e("div",L,[R,e("div",M,[o(v,{ref:"form",class:"col-md-10",onSubmit:p.createOrder},{default:E(({errors:l})=>[e("div",O,[q,e("div",P,[o(n,{id:"email",name:"email",type:"email",class:m(["form-control w-100",{"is-invalid":l.email}]),placeholder:"請輸入Email信箱",rules:"email|required",modelValue:t.form.user.email,"onUpdate:modelValue":s[0]||(s[0]=a=>t.form.user.email=a)},null,8,["class","modelValue"]),o(i,{name:"email",class:"invalid-feedback text-start"})])]),e("div",null,[j,e("div",z,[e("div",Q,[o(n,{id:"name",name:"姓名",type:"text",class:m(["form-control",{"is-invalid":l.姓名}]),placeholder:"收件人姓名",rules:"required",modelValue:t.form.user.name,"onUpdate:modelValue":s[1]||(s[1]=a=>t.form.user.name=a)},null,8,["class","modelValue"]),o(i,{name:"姓名",class:"invalid-feedback text-start"})]),e("div",G,[o(n,{id:"tel",name:"電話",type:"tel",class:m(["form-control",{"is-invalid":l.電話}]),placeholder:"收件人行動電話",rules:p.isPhone,modelValue:t.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=a=>t.form.user.tel=a)},null,8,["class","rules","modelValue"]),o(i,{name:"電話",class:"invalid-feedback text-start"})])])]),e("div",H,[o(n,{id:"address",name:"地址",type:"text",class:m(["form-control",{"is-invalid":l.地址}]),placeholder:"請輸入寄送地址",rules:"required",modelValue:t.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=a=>t.form.user.address=a)},null,8,["class","modelValue"]),o(i,{name:"地址",class:"invalid-feedback text-start"})]),e("div",J,[K,S(e("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[4]||(s[4]=a=>t.form.message=a)},null,512),[[k,t.form.message]])]),W]),_:1},8,["onSubmit"])])]),e("div",X,[e("div",Y,[Z,(u(!0),_(h,null,I(d.carts,l=>(u(),_("div",{key:l.id},[e("div",$,[e("div",ee,[e("img",{src:l.product.imageUrl,alt:"",class:"img-fluid rounded rounded-1"},null,8,se)]),e("div",te,f(l.product.title),1),e("div",oe,f(l.final_total),1)])]))),128)),le,e("div",ae,[re,e("span",null,"NT$"+f(d.final_total),1)])])])])]),o(g)],64)}const _e=x(T,[["render",de]]);export{_e as default};

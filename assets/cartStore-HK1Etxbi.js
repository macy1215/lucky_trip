import{E as n,G as i}from"./index-hK-5s-CT.js";import{S as a}from"./sweetalert2.all-QUaU5Uns.js";var d={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_NAME:"lucky_trip",BASE_URL:"/lucky_trip/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:s,VITE_NAME:c}=d,u=n("cartStore",{state:()=>({carts:[],final_total:0,order_total:0,total:0,status:{addCartLoading:"",showCartLoading:"",cartQtyLoading:""}}),actions:{addToCart(t,e=1){const o={product_id:t,qty:e};i.post(`${s}/api/${c}/cart`,{data:o}).then(r=>{this.getCart(),a.fire({title:r.data.message,icon:"success",timer:1500,showConfirmButton:!1})}).catch(r=>{a.fire({icon:"error",title:r.data.message})})},getCart(){i.get(`${s}/api/${c}/cart`).then(t=>{this.carts=t.data.data.carts,this.final_total=t.data.data.final_total,this.total=t.data.data.total,this.order_total=t.data.data.total}).catch(t=>{a.fire({icon:"error",title:t.data.message})})},removeCartItem(t){a.fire({title:"您確定要刪除這個商品嗎？",text:"一但刪除將無法復原",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"我要刪除"}).then(e=>{e.isConfirmed&&(this.status.cartQtyLoading=t,this.status.showCartLoading=t,i.delete(`${s}/api/${c}/cart/${t}`).then(o=>{this.status.cartQtyLoading="",this.status.showCartLoading="",this.getCart(),a.fire({title:o.data.message,text:"確定已將產品刪除",icon:"success"})}).catch(o=>{a.fire({icon:"error",title:o.data.message})}))})},removeAllCart(){a.fire({title:"您確定要刪除所有商品嗎？",text:"一但刪除將無法復原",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"我要刪除"}).then(t=>{t.isConfirmed&&i.delete(`${s}/api/${c}/carts`).then(e=>{console.log(e),this.getCart(),a.fire({title:"列表刪除",text:"確定已將列表刪除",icon:"success"})}).catch(e=>{a.fire({icon:"error",title:e.data.message})})})},changeCartQty(t,e=1){const o={product_id:t.product_id,qty:e};this.status.cartQtyLoading=t.id,i.put(`${s}/api/${c}/cart/${t.id}`,{data:o}).then(()=>{this.status.cartQtyLoading="",this.getCart()}).catch(r=>{a.fire({icon:"error",title:r.data.message})})}}});export{u as c};

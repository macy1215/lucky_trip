import{G as n,A as i}from"./index--CWl1Wb0.js";import{S as r}from"./sweetalert2.all-hRkOYDhg.js";var l={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_NAME:"lucky_trip",BASE_URL:"/lucky_trip/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:s,VITE_NAME:c}=l,u=n("cartStore",{state:()=>({carts:[],final_total:0,order_total:0,total:0,status:{addCartLoading:"",showCartLoading:"",cartQtyLoading:""}}),actions:{addToCart(t,o=1){console.log(t,o);const a={product_id:t,qty:o};i.post(`${s}/api/${c}/cart`,{data:a}).then(e=>{console.log(e),this.getCart(),r.fire({title:"成功加入購物車",icon:"success",timer:1500,showConfirmButton:!1})}).catch(e=>{r.fire({icon:"error",title:e})})},getCart(){i.get(`${s}/api/${c}/cart`).then(t=>{console.log(t),this.carts=t.data.data.carts,this.final_total=t.data.data.final_total,this.total=t.data.data.total,this.order_total=t.data.data.total,console.log("pinia cart",this.carts)}).catch(t=>{console.log(t)})},removeCartItem(t){r.fire({title:"您確定要刪除這個商品嗎？",text:"一但刪除將無法復原",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"我要刪除"}).then(o=>{o.isConfirmed&&(this.status.cartQtyLoading=t,this.status.showCartLoading=t,console.log(t),i.delete(`${s}/api/${c}/cart/${t}`).then(a=>{console.log(a),this.status.cartQtyLoading="",this.status.showCartLoading="",this.getCart(),r.fire({title:"刪除該商品",text:"確定已將產品刪除",icon:"success"})}).catch(a=>{console.log(a)}))})},removeAllCart(){r.fire({title:"您確定要刪除所有商品嗎？",text:"一但刪除將無法復原",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"我要刪除"}).then(t=>{t.isConfirmed&&i.delete(`${s}/api/${c}/carts`).then(o=>{console.log(o),this.getCart(),r.fire({title:"刪除所有商品",text:"確定已將列表刪除",icon:"success"})}).catch(o=>{window.alert(o.data.message)})})},changeCartQty(t,o=1){const a={product_id:t.product_id,qty:o};this.status.cartQtyLoading=t.id,i.put(`${s}/api/${c}/cart/${t.id}`,{data:a}).then(e=>{console.log(e),this.status.cartQtyLoading="",this.getCart()}).catch(e=>{console.log(e)})}}});export{u as c};

import{I as n,J as i}from"./index-9V4W6d-f.js";import{S as a}from"./sweetalert2.all-D5HYM6X6.js";var d={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_NAME:"lucky_trip",BASE_URL:"/lucky_trip/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:s,VITE_NAME:c}=d,h=n("cartStore",{state:()=>({carts:[],final_total:0,order_total:0,total:0,status:{addCartLoading:"",showCartLoading:"",cartQtyLoading:""}}),actions:{addToCart(t,e=1){const r={product_id:t,qty:e};i.post(`${s}/api/${c}/cart`,{data:r}).then(o=>{this.getCart(),a.fire({title:o.data.message,icon:"success",timer:1500,showConfirmButton:!1})}).catch(o=>{a.fire({icon:"error",title:o.data.message})})},getCart(){i.get(`${s}/api/${c}/cart`).then(t=>{this.carts=t.data.data.carts,this.final_total=t.data.data.final_total,this.total=t.data.data.total,this.order_total=t.data.data.total}).catch(t=>{a.fire({icon:"error",title:t.data.message})})},removeCartItem(t){a.fire({title:"您確定要刪除這個商品嗎？",text:"一但刪除將無法復原",icon:"warning",showCancelButton:!0,confirmButtonColor:"#2e949c",cancelButtonColor:"#ADADAD",confirmButtonText:"我要刪除",cancelButtonText:"再想想",reverseButtons:!0}).then(e=>{e.isConfirmed&&(this.status.cartQtyLoading=t,this.status.showCartLoading=t,i.delete(`${s}/api/${c}/cart/${t}`).then(r=>{this.status.cartQtyLoading="",this.status.showCartLoading="",this.getCart(),a.fire({title:r.data.message,text:"確定已將產品刪除",icon:"success"})}).catch(r=>{a.fire({icon:"error",title:r.data.message})}))})},removeAllCart(){a.fire({title:"您確定要刪除所有商品嗎？",text:"一但刪除將無法復原",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#ADADAD",confirmButtonText:"我要刪除",cancelButtonText:"再想想",reverseButtons:!0}).then(t=>{t.isConfirmed&&i.delete(`${s}/api/${c}/carts`).then(e=>{this.getCart(),a.fire({title:e.data.message,text:"確定已將列表刪除",icon:"success"})}).catch(e=>{a.fire({icon:"error",title:e.data.message})})})},changeCartQty(t,e=1){const r={product_id:t.product_id,qty:e};this.status.cartQtyLoading=t.id,i.put(`${s}/api/${c}/cart/${t.id}`,{data:r}).then(()=>{this.status.cartQtyLoading="",this.getCart()}).catch(o=>{a.fire({icon:"error",title:o.data.message})})}}});export{h as c};

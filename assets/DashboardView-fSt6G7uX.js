import{S as h}from"./sweetalert2.all-3TZsKIdH.js";import{C as v}from"./collapse-jDGsSaOT.js";import{_ as m,r as p,o as u,c as _,b as e,d as s,w as o,e as g,v as f,A as k,G as b,E as N,F as x,f as i}from"./index-ofKIBdRT.js";import"./selector-engine-yOkAxJi2.js";const y={data(){return{checkSuccess:!1,headerNavDrop:null,isNavbarOpen:!1}},methods:{checkLogin(){const r=document.cookie.replace(/(?:(?:^|.*;\s*)luckyTrip\s*=\s*([^;]*).*$)|^.*$/,"$1");r?(this.$http.defaults.headers.common.Authorization=`${r}`,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/user/check",{api_token:this.token}).then(()=>{this.checkSuccess=!0}).catch(()=>{this.checkSuccess=!1,this.$router.push("/login")})):(alert("尚未登入"),this.$router.push("/login"))},signout(){document.cookie="luckyTrip=;expires=;",h.fire({icon:"success",title:"成功登出帳號，token 已清除",showConfirmButton:!1,timer:1500}),this.$router.push("/login")},toggleNavbar(){this.isNavbarOpen=!this.isNavbarOpen,this.headerNavDrop.toggle()}},mounted(){this.checkLogin(),this.headerNavDrop=new v(this.$refs.headerNavDrop,{toggle:!1})}},w={class:"navbar navbar-expand-md mb-3 container"},C={class:"container-fluid"},$=e("span",{class:"nav-link logostyle"},[e("a",null,"lucky-trip")],-1),S=e("i",{class:"bi bi-list",style:{"font-size":"2.5rem"}},null,-1),D=[S],V={class:"collapse navbar-collapse navbar-nav ms-auto py-10 py-lg-0",id:"navbarSupportedContent",ref:"headerNavDrop"},B={class:"navbar-nav"},L={class:"nav-item"},O={class:"nav-item"},R={class:"nav-item"},T={class:"nav-item"};function z(r,t,A,E,c,n){const a=p("RouterLink"),d=p("RouterView");return u(),_(x,null,[e("nav",w,[e("div",C,[s(a,{to:"/"},{default:o(()=>[$]),_:1}),e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",onClick:t[0]||(t[0]=(...l)=>n.toggleNavbar&&n.toggleNavbar(...l))},D),g(e("div",V,[e("ul",B,[e("li",L,[s(a,{class:"nav-link text-primary active","aria-current":"page",to:"/admin/products"},{default:o(()=>[i("方案列表")]),_:1})]),e("li",O,[s(a,{class:"nav-link text-primary","aria-current":"page",to:"/admin/orders"},{default:o(()=>[i("訂單列表")]),_:1})]),e("li",R,[s(a,{class:"nav-link text-primary","aria-current":"page",to:"/admin/coupons"},{default:o(()=>[i("優惠卷列表")]),_:1})]),e("li",T,[e("a",{href:"#",class:"nav-link text-primary","aria-current":"page",onClick:t[1]||(t[1]=k(l=>n.signout(),["prevent"]))},"登出")])])],512),[[f,c.isNavbarOpen]])])]),c.checkSuccess?(u(),b(d,{key:0})):N("",!0)],64)}const q=m(y,[["render",z]]);export{q as default};

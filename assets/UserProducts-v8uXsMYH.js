import{_ as E,m as g,a as T,r as l,o as a,c as n,d as c,b as t,w as h,F as m,u as v,t as u,A as f,B as C,f as I,y as V,z as $}from"./index-VqbeDwkB.js";import{F as B}from"./FooterBanner-1XcTXQ2n.js";import{P as U}from"./PaginationView-h7lN-3Ns.js";import{S as b}from"./sweetalert2.all-6__HUNeQ.js";import{c as M}from"./cartStore-B_kbqETc.js";import{s as y}from"./saveStore-yNN3stC5.js";var N={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_NAME:"lucky_trip",BASE_URL:"/lucky_trip/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:x,VITE_NAME:S}=N,R={data(){return{isLoading:!1,fullpage:!0,addSave:!0,carts:[],products:[],productId:"",categories:["文化探索","休閒渡假","自然景色","親子出遊","美食之旅"],pagination:{},isHover:{}}},watch:{"$route.query":{handler(){this.getUserProduct()},deep:!0}},methods:{getUserProduct(){this.isLoading=!0;const{category:o=""}=this.$route.query,r=`${x}/api/${S}/products/?category=${o}`;this.$http.get(r).then(s=>{this.products=s.data.products,this.pricethuand=s.data.products,this.priceorithouand=s.data.products,this.pagination=s.data.pagination,this.isLoading=!1}).catch(s=>{b.fire({icon:"error",title:s.data.message})})},getProducts(o=1){this.isLoading=!0;const r=`${x}/api/${S}/products?page=${o}`;this.$http.get(r).then(s=>{this.products=s.data.products,this.pagination=s.data.pagination,this.isLoading=!1}).catch(s=>{b.fire({title:s.data.message,icon:"error",timer:1500,showConfirmButton:!1})})},...g(M,["addToCart"]),...g(y,["addToSave"])},computed:{...T(y,["savelist","isProductSaved"])},components:{FooterBanner:B,Pagination:U},mounted(){this.getUserProduct()}},d=o=>(V("data-v-92b6d443"),o=o(),$(),o),A=d(()=>t("div",{class:"productBox"},[t("div",{class:"productAllbg"})],-1)),H={class:"container"},D={class:"row py-5"},F={class:"col-md-3 col-12"},j={class:"bg-white shadow border-0 rounded-3 justify-content-start text-start py-md-4 py-3 px-4 my-md-0 mt-2 mb-4"},q=d(()=>t("h3",{class:"fw-bold text-start"},"主題選擇",-1)),z=d(()=>t("hr",null,null,-1)),O={class:"px-0 d-flex flex-wrap my-0 list-unstyled"},G=d(()=>t("button",{type:"button",class:"btn btn-outline-primary btn-sm me-3 text-start btnHover mb-2"},"全部行程",-1)),J={type:"button",class:"btn btn-outline-primary btn-sm me-3 text-start btnHover mb-2"},K={class:"col-md-9 col-12"},Q={class:"row"},W={class:"card mb-4"},X={class:"overflow-hidden productImg position-relative"},Y=["src","alt"],Z={class:"d-flex position-absolute end-0 bottom-0 pe-2 pb-2"},tt=["onClick"],et=["onMouseover","onMouseleave"],ot={key:1,class:"bi bi-heart-fill fs-4 iconSave"},st={class:"card-body"},it={class:"card-title text-start"},at={class:"row text-start justify-content-between align-items-center"},nt={class:"col-lg-7 col-md-12 col-7"},rt={class:"text-decoration-line-through text-black-50 fs-6 pe-2"},ct={class:"text-primary h5 d-sm-inline-block"},dt=["onClick"],lt=d(()=>t("button",{class:"btn btn-primary text-white addBtn",type:"submit"},"加入購物車",-1)),ut=[lt];function pt(o,r,s,_t,i,w){const k=l("VueLoading"),p=l("RouterLink"),L=l("Pagination"),P=l("footer-banner");return a(),n(m,null,[c(k,{active:i.isLoading,"onUpdate:active":r[0]||(r[0]=e=>i.isLoading=e),loader:"bars","can-cancel":!1,"is-full-page":i.fullpage},null,8,["active","is-full-page"]),A,t("div",H,[t("div",D,[t("div",F,[t("div",j,[q,z,t("ul",O,[t("li",null,[c(p,{to:"/products"},{default:h(()=>[G]),_:1})]),(a(!0),n(m,null,v(i.categories,e=>(a(),n("li",{class:"list-group-item",key:e},[c(p,{to:`/products?category=${e}`},{default:h(()=>[t("button",J,u(e),1)]),_:2},1032,["to"])]))),128))])])]),t("div",K,[t("div",Q,[(a(!0),n(m,null,v(i.products,e=>(a(),n("div",{class:"col-md-6 d-flex",key:e.id},[t("div",W,[c(p,{to:`/product/${e.id}`,class:"text-decoration-none"},{default:h(()=>[t("div",X,[t("img",{src:e.imageUrl,class:"card-img-top object-fit-cover",alt:e.title,style:{width:"105%"}},null,8,Y),t("div",Z,[t("div",{onClick:f(_=>o.addToSave(e),["prevent"]),class:"rounded-circle btn btn-outline-light border border-2 pb-1"},[o.isProductSaved(e.id)?(a(),n("i",ot)):(a(),n("i",{key:0,class:C(["bi bi-heart fs-4 iconSave",{"text-dark":i.isHover[e.id]}]),onMouseover:_=>i.isHover[e.id]=!0,onMouseleave:_=>i.isHover[e.id]=!1},null,42,et))],8,tt)])]),t("div",st,[t("h5",it,u(e.title),1),t("div",at,[t("div",nt,[I(" 售價 "),t("span",rt," NT"+u(e.origin_price)+"元 ",1),t("div",ct," NT"+u(e.price)+" 元",1)]),t("div",{class:"col-lg-5 col-md-12 col-5 text-lg-end text-md-start text-end pt-lg-0 pt-md-3 pt-0",onClick:f(_=>o.addToCart(e.id,o.qty),["prevent"])},ut,8,dt)])])]),_:2},1032,["to"])])]))),128))]),c(L,{pagination:i.pagination,onEmitPages:w.getProducts},null,8,["pagination","onEmitPages"])])])]),c(P)],64)}const yt=E(R,[["render",pt],["__scopeId","data-v-92b6d443"]]);export{yt as default};

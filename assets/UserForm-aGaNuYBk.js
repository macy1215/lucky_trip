import{F as C}from"./FooterBanner-1XcTXQ2n.js";import{_ as B,m as N,a as E,r as c,o as m,c as u,b as t,d as o,w as g,F as h,u as y,t as n,f as r,B as f,e as I,H as S}from"./index-VqbeDwkB.js";import{c as w}from"./cartStore-B_kbqETc.js";import{S as b}from"./sweetalert2.all-6__HUNeQ.js";var U={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_NAME:"lucky_trip",BASE_URL:"/lucky_trip/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:F,VITE_NAME:A}=U,D={data(){return{product:{},isLoading:!0,form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{...N(w,["addToCart","removeAllCart","removeCartItem","changeCartQty","getCart"]),isPhone(a){return/^(09)[0-9]{8}$/.test(a)?!0:"請輸入以「09」開頭的行動電話號碼"},createOrder(){b.fire({title:"確定要送出訂單資訊嗎？",icon:"warning",showCancelButton:!0,confirmButtonColor:"#2e949c",cancelButtonColor:"#ADADAD",confirmButtonText:"確認送出",cancelButtonText:"取消",reverseButtons:!0}).then(a=>{if(a.isConfirmed){const s=this.form,x=`${F}/api/${A}/order`;this.$http.post(x,{data:s}).then(i=>{this.orderId=i.data.orderId,this.$refs.form.resetForm(),this.$router.push(`/paycheck/${i.data.orderId}`),localStorage.setItem("orderId",i.data.orderId),this.getCart(),b.fire({icon:"success",title:"訂單成立"})}).catch(i=>{b.fire({icon:"success",title:i.response.data.message})})}})}},computed:{...E(w,["carts","status","final_total","total"])},components:{FooterBanner:C},mounted(){}},q={class:"container"},L={class:"row justify-content-center mt-5"},R={class:"col-10"},j={class:"position-relative m-4 px-md-5 px-2"},M=t("div",{class:"progress",style:{height:"1px"}},[t("div",{class:"progress-bar w-50",role:"progressbar","aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})],-1),O=t("button",{type:"button",class:"position-absolute top-0 start-50 translate-middle btn btn-sm btn-primary rounded-pill text-white",style:{width:"2rem",height:"2rem"}},"2",-1),$=t("button",{type:"button",class:"position-absolute top-0 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"2rem",height:"2rem",left:"99%",cursor:"default"}},"3",-1),P=t("div",{class:"row text-primary"},[t("div",{class:"col text-start"},"確認商品"),t("div",{class:"col"},"確認購買資訊"),t("div",{class:"col text-end"},"付款確認")],-1),z={class:"container py-md-5 py-2"},H={class:"row"},Q={class:"col-lg-4 px-md-1 d-md-none d-block"},G={class:"bg-secondary bg-opacity-10 rounded-2 px-md-2 pb-md-4 pt-md-3 h-auto pt-3 mb-3 mt-5"},J=t("h3",{class:"my-md-0 my-2 pb-2"},[t("i",{class:"bi bi-list-ol pe-2"}),r("購買清單")],-1),K={class:"d-flex row mb-3 align-items-center px-4"},W={class:"col-md-3 col-6 px-md-0"},X=["src"],Y={class:"col-6 text-start d-md-none d-block"},Z={class:"mb-3"},tt=t("hr",null,null,-1),et={class:"fs-3 text-end fw-bold d-flex justify-content-between px-lg-0 px-4 pb-lg-0 pb-4"},st=t("span",null,"總計",-1),ot={class:"col-lg-8"},lt={class:"my-md-0 mt-2 mb-3 px-2 row justify-content-center"},dt={class:"mb-4"},at=t("h3",{class:"text-start fs-3"},"聯絡資訊",-1),nt=t("div",{class:"text-start pb-2"},"以下資訊為寄件時填寫的資料，請填寫以下必填欄位",-1),rt=t("div",{class:"text-danger text-start fw-bold pb-4"},"*為必填",-1),it={class:"mb-3 d-flex flex-column"},ct=t("label",{for:"email",class:"form-label text-start required"},[r("電子信箱 "),t("strong",{class:"text-danger fw-bold"},"*")],-1),mt=t("h3",{class:"text-start fs-3 mb-3"},"收件者資訊欄",-1),ut={class:"row"},_t={class:"mb-3 col-md-6 d-flex flex-column"},pt=t("label",{for:"name",class:"form-label text-start required"},[r("姓名 "),t("strong",{class:"text-danger fw-bold"},"*")],-1),ft={class:"mb-3 col-md-6 d-flex flex-column"},ht=t("label",{for:"name",class:"form-label text-start required"},[r("電話 "),t("strong",{class:"text-danger fw-bold"},"*")],-1),bt={class:"mb-3 col-md-12 d-flex flex-column"},xt=t("label",{for:"name",class:"form-label text-start required"},[r("地址 "),t("strong",{class:"text-danger fw-bold"},"*")],-1),vt={class:"mb-3 text-start"},gt=t("label",{for:"message",class:"form-label"},"備註留言",-1),yt=t("div",{class:"text-end"},[t("button",{class:"btn btn-primary text-white",type:"submit"},"送出訂單")],-1),wt={class:"col-lg-4 px-md-1 d-md-block d-none"},Vt={class:"bg-secondary bg-opacity-10 rounded-2 px-md-2 pb-md-4 pt-md-3 h-auto pt-3 mb-5"},kt=t("h3",{class:"my-md-0 my-2 pb-2"},[t("i",{class:"bi bi-list-ol pe-2"}),r("購買清單")],-1),Tt={class:"d-flex row mb-3 align-items-center px-4"},Ct={class:"col-md-3 col-6 px-md-0"},Bt=["src"],Nt={class:"col-md-6 col-4 text-start d-md-block d-none"},Et={class:"col-md-3 col-3 text-end d-md-block d-none"},It={class:"col-6 text-start d-md-none d-block"},St={class:"mb-3"},Ut=t("hr",null,null,-1),Ft={class:"fs-3 text-end fw-bold d-flex justify-content-between px-lg-0 px-4 pb-lg-0 pb-4"},At=t("span",null,"總計",-1);function Dt(a,s,x,i,l,v){const V=c("router-link"),_=c("VeeField"),p=c("error-message"),k=c("VeeForm"),T=c("footer-banner");return m(),u(h,null,[t("div",q,[t("div",L,[t("div",R,[t("div",j,[M,o(V,{type:"button",class:"position-absolute top-0 start-0 ms-3 translate-middle btn btn-sm btn-primary rounded-pill text-white",to:"/carts",style:{width:"2rem",height:"2rem"}},{default:g(()=>[r("1")]),_:1}),O,$]),P])])]),t("div",z,[t("div",H,[t("div",Q,[t("div",G,[J,(m(!0),u(h,null,y(a.carts,e=>(m(),u("div",{key:e.id},[t("div",K,[t("div",W,[t("img",{src:e.product.imageUrl,alt:"",class:"img-fluid rounded rounded-1"},null,8,X)]),t("div",Y,[t("div",Z,n(e.product.title),1),t("div",null,"NT$"+n(e.final_total)+"元",1)])])]))),128)),tt,t("div",et,[st,t("span",null,"NT$"+n(a.final_total)+"元",1)])])]),t("div",ot,[t("div",lt,[o(k,{ref:"form",class:"col-md-10",onSubmit:v.createOrder},{default:g(({errors:e})=>[t("div",dt,[at,nt,rt,t("div",it,[ct,o(_,{id:"email",name:"email",type:"email",class:f(["form-control w-100",{"is-invalid":e.email}]),placeholder:"請輸入Email信箱",rules:"email|required",modelValue:l.form.user.email,"onUpdate:modelValue":s[0]||(s[0]=d=>l.form.user.email=d)},null,8,["class","modelValue"]),o(p,{name:"email",class:"invalid-feedback text-start"})])]),t("div",null,[mt,t("div",ut,[t("div",_t,[pt,o(_,{id:"name",name:"姓名",type:"text",class:f(["form-control",{"is-invalid":e.姓名}]),placeholder:"收件人姓名",rules:"required",modelValue:l.form.user.name,"onUpdate:modelValue":s[1]||(s[1]=d=>l.form.user.name=d)},null,8,["class","modelValue"]),o(p,{name:"姓名",class:"invalid-feedback text-start"})]),t("div",ft,[ht,o(_,{id:"tel",name:"電話",type:"tel",class:f(["form-control",{"is-invalid":e.電話}]),placeholder:"收件人行動電話",rules:v.isPhone,modelValue:l.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=d=>l.form.user.tel=d)},null,8,["class","rules","modelValue"]),o(p,{name:"電話",class:"invalid-feedback text-start"})])])]),t("div",bt,[xt,o(_,{id:"address",name:"地址",type:"text",class:f(["form-control",{"is-invalid":e.地址}]),placeholder:"請輸入寄送地址",rules:"required",modelValue:l.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=d=>l.form.user.address=d)},null,8,["class","modelValue"]),o(p,{name:"地址",class:"invalid-feedback text-start"})]),t("div",vt,[gt,I(t("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[4]||(s[4]=d=>l.form.message=d)},null,512),[[S,l.form.message]])]),yt]),_:1},8,["onSubmit"])])]),t("div",wt,[t("div",Vt,[kt,(m(!0),u(h,null,y(a.carts,e=>(m(),u("div",{key:e.id},[t("div",Tt,[t("div",Ct,[t("img",{src:e.product.imageUrl,alt:"",class:"img-fluid rounded rounded-1"},null,8,Bt)]),t("div",Nt,n(e.product.title),1),t("div",Et," NT$"+n(e.final_total)+"元 ",1),t("div",It,[t("div",St,n(e.product.title),1),t("div",null,"NT$"+n(e.final_total)+"元",1)])])]))),128)),Ut,t("div",Ft,[At,t("span",null,"NT$"+n(a.final_total)+"元",1)])])])])]),o(T)],64)}const Mt=B(D,[["render",Dt]]);export{Mt as default};

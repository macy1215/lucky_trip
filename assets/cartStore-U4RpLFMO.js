import{E as d,G as s}from"./index-Vr07P915.js";import{S as e}from"./sweetalert2.all-iwnwEO_u.js";import{i as c}from"./index-x2-Xgt7k.js";var l={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_NAME:"lucky_trip",BASE_URL:"/lucky_trip/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:i,VITE_NAME:n}=l,g=d("cartStore",{state:()=>({carts:[],final_total:0,order_total:0,total:0,status:{addCartLoading:"",showCartLoading:"",cartQtyLoading:""}}),actions:{addToCart(t,a=1){const o={product_id:t,qty:a};s.post(`${i}/api/${n}/cart`,{data:o}).then(r=>{this.getCart(),console.log(r),e.fire({title:"加入購物車",icon:"success",timer:1500,showConfirmButton:!1})}).catch(r=>{e.fire({icon:"error",title:"錯誤"}),console.log(r,"err.response.data.message")})},getCart(){s.get(`${i}/api/${n}/cart`).then(t=>{this.carts=t.data.data.carts,this.final_total=t.data.data.final_total,this.total=t.data.data.total,this.order_total=t.data.data.total}).catch(t=>{e.fire({icon:"error",title:t.response.data.message})})},removeCartItem(t){e.fire({title:"您確定要刪除這個商品嗎？",text:"一但刪除將無法復原",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"我要刪除"}).then(a=>{a.isConfirmed&&(this.status.cartQtyLoading=t,this.status.showCartLoading=t,s.delete(`${i}/api/${n}/cart/${t}`).then(o=>{this.status.cartQtyLoading="",this.status.showCartLoading="",this.getCart(),e.fire({title:o.response.data.message,text:"確定已將產品刪除",icon:"success"})}).catch(o=>{e.fire({icon:"error",title:o.response.data.message})}))})},removeAllCart(){e.fire({title:"您確定要刪除所有商品嗎？",text:"一但刪除將無法復原",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"我要刪除"}).then(t=>{t.isConfirmed&&s.delete(`${i}/api/${n}/carts`).then(a=>{this.getCart(),e.fire({title:a.response.data.message,text:"確定已將列表刪除",icon:"success"})}).catch(a=>{c.error(a.response.data.message)})})},changeCartQty(t,a=1){const o={product_id:t.product_id,qty:a};this.status.cartQtyLoading=t.id,s.put(`${i}/api/${n}/cart/${t.id}`,{data:o}).then(()=>{this.status.cartQtyLoading="",this.getCart()}).catch(r=>{c.error(r.response.data.message)})}}});export{g as c};

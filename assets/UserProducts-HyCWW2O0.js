import{_ as T,m as b,a as C,r as d,o as a,c as r,d as c,b as t,w as h,F as g,x as f,n as v,t as u,B as y,f as E,z as D,A as U}from"./index-qpIxWrwC.js";import{F as V}from"./FooterBanner-xqghoCTF.js";import{P as B}from"./PaginationView-D80Ic77U.js";import{S as x}from"./sweetalert2.all-TZEbaj5L.js";import{c as F}from"./cartStore-d46w5U-0.js";import{s as w}from"./saveStore-HXuHZWxw.js";var M={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_NAME:"lucky_trip",BASE_URL:"/lucky_trip/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:S,VITE_NAME:k}=M,N={data(){return{isLoading:!1,fullpage:!0,addSave:!0,carts:[],products:[],productId:"",categories:["文化探索","休閒渡假","自然景色","親子出遊","美食之旅"],pagination:{},isHover:{},selectedItem:null}},watch:{"$route.query":{handler(){this.getUserProduct()},deep:!0},selectedItem(){this.getUserProduct()}},methods:{getUserProduct(){this.isLoading=!0;const{category:s=""}=this.$route.query,n=`${S}/api/${k}/products/?category=${s}`;this.$http.get(n).then(i=>{this.products=i.data.products,this.pricethuand=i.data.products,this.priceorithouand=i.data.products,this.pagination=i.data.pagination,this.isLoading=!1}).catch(i=>{x.fire({icon:"error",title:i.data.message})})},getProducts(s=1){this.isLoading=!0;const n=`${S}/api/${k}/products?page=${s}`;this.$http.get(n).then(i=>{this.products=i.data.products,this.pagination=i.data.pagination,this.isLoading=!1}).catch(i=>{x.fire({title:i.data.message,icon:"error",timer:1500,showConfirmButton:!1})})},selectItem(s){this.selectedItem=s},...b(F,["addToCart"]),...b(w,["addToSave"])},computed:{...C(w,["savelist","isProductSaved"])},components:{FooterBanner:V,Pagination:B},mounted(){this.getUserProduct()}},m=s=>(D("data-v-83d97299"),s=s(),U(),s),R=m(()=>t("div",{class:"productBox"},[t("div",{class:"productAllbg"})],-1)),A={class:"container"},H={class:"row py-5"},$={class:"col-md-3 col-12"},z={class:"bg-white shadow border-0 rounded-3 justify-content-start text-start py-md-4 py-3 px-4 my-md-0 mt-2 mb-4"},W=m(()=>t("h3",{class:"fw-bold text-start"},"主題選擇",-1)),j=m(()=>t("hr",null,null,-1)),q={class:"px-0 d-flex flex-wrap my-0 list-unstyled"},O=["onClick"],G={class:"col-md-9 col-12"},J={class:"row"},K={class:"card mb-4"},Q={class:"overflow-hidden productImg position-relative rounded-top img-box"},X=["src","alt"],Y={class:"d-flex position-absolute end-0 bottom-0 pe-2 pb-2"},Z=["onClick"],tt=["onMouseover","onMouseleave"],et={key:1,class:"bi bi-heart-fill fs-4 iconSave"},st={class:"card-body"},ot={class:"card-title text-start h4 fw-bold mb-3"},it={class:"row text-start justify-content-between align-items-center"},nt={class:"col-lg-7 col-md-12 col-7"},at={class:"mb-1"},rt={class:"text-decoration-line-through text-black-50 fs-6 pe-2"},ct={class:"text-primary h5 d-sm-inline-block"},lt=["onClick"],dt=m(()=>t("button",{class:"btn btn-primary text-white addBtn",type:"submit"}," 加入購物車 ",-1)),ut=[dt];function mt(s,n,i,pt,o,p){const I=d("VueLoading"),_=d("RouterLink"),L=d("Pagination"),P=d("footer-banner");return a(),r(g,null,[c(I,{active:o.isLoading,"onUpdate:active":n[0]||(n[0]=e=>o.isLoading=e),loader:"bars","can-cancel":!1,"is-full-page":o.fullpage},null,8,["active","is-full-page"]),R,t("div",A,[t("div",H,[t("div",$,[t("div",z,[W,j,t("ul",q,[t("li",null,[c(_,{to:"/products"},{default:h(()=>[t("button",{type:"button",class:v(["btn btn-outline-primary btn-sm me-3 text-start btnHover mb-2",{"btn-primary":o.selectedItem===null,"text-white":o.selectedItem===null}]),onClick:n[1]||(n[1]=e=>p.selectItem(null))}," 全部行程 ",2)]),_:1})]),(a(!0),r(g,null,f(o.categories,e=>(a(),r("li",{class:"list-group-item",key:e},[c(_,{to:`/products?category=${e}`},{default:h(()=>[t("button",{type:"button",class:v(["btn btn-outline-primary btn-sm me-3 text-start btnHover mb-2",{"btn-primary":o.selectedItem===e,"text-white":o.selectedItem===e}]),onClick:l=>p.selectItem(e)},u(e),11,O)]),_:2},1032,["to"])]))),128))])])]),t("div",G,[t("div",J,[(a(!0),r(g,null,f(o.products,e=>(a(),r("div",{class:"col-md-6 d-flex",key:e.id},[t("div",K,[c(_,{to:`/product/${e.id}`,class:"text-decoration-none"},{default:h(()=>[t("div",Q,[t("img",{src:e.imageUrl,class:"card-img-top object-fit-cover",alt:e.title,style:{width:"105%"}},null,8,X),t("div",Y,[t("div",{onClick:y(l=>s.addToSave(e),["prevent"]),class:"rounded-circle btn btn-outline-light border border-2 pb-1"},[s.isProductSaved(e.id)?(a(),r("i",et)):(a(),r("i",{key:0,class:v(["bi bi-heart fs-4 iconSave",{"text-dark":o.isHover[e.id]}]),onMouseover:l=>o.isHover[e.id]=!0,onMouseleave:l=>o.isHover[e.id]=!1},null,42,tt))],8,Z)])]),t("div",st,[t("h5",ot,u(e.title),1),t("div",it,[t("div",nt,[t("div",at,[E(" 售價 "),t("span",rt," NT"+u(e.origin_price.toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0,maximumFractionDigits:0}))+"元 ",1)]),t("div",ct," NT"+u(e.price.toLocaleString("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0,maximumFractionDigits:0}))+" 元 ",1)]),t("div",{class:"col-lg-5 col-md-12 col-5 text-lg-end text-md-start text-end pt-lg-0 pt-md-3 pt-0",onClick:y(l=>s.addToCart(e.id,s.qty),["prevent"])},ut,8,lt)])])]),_:2},1032,["to"])])]))),128))]),c(L,{pagination:o.pagination,onEmitPages:p.getProducts},null,8,["pagination","onEmitPages"])])])]),c(P)],64)}const yt=T(N,[["render",mt],["__scopeId","data-v-83d97299"]]);export{yt as default};

import{_ as C,m as f,a as E,r as d,o as a,c as r,d as c,b as t,w as m,F as g,x as b,n as v,t as u,B as y,f as T,z as U,A as V}from"./index-7MNBH4hb.js";import{F as B}from"./FooterBanner-CqzDPIpw.js";import{P as M}from"./PaginationView-o6K6-dBi.js";import{S as x}from"./sweetalert2.all-AlfFjHvC.js";import{c as N}from"./cartStore-4jRIVlBp.js";import{s as w}from"./saveStore-DiN-hZuq.js";var R={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_NAME:"lucky_trip",BASE_URL:"/lucky_trip/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:k,VITE_NAME:I}=R,A={data(){return{isLoading:!1,fullpage:!0,addSave:!0,carts:[],products:[],productId:"",categories:["文化探索","休閒渡假","自然景色","親子出遊","美食之旅"],pagination:{},isHover:{},selectedItem:null}},watch:{"$route.query":{handler(){this.getUserProduct()},deep:!0},selectedItem(){this.getUserProduct()}},methods:{getUserProduct(){this.isLoading=!0;const{category:s=""}=this.$route.query,n=`${k}/api/${I}/products/?category=${s}`;this.$http.get(n).then(i=>{this.products=i.data.products,this.pricethuand=i.data.products,this.priceorithouand=i.data.products,this.pagination=i.data.pagination,this.isLoading=!1}).catch(i=>{x.fire({icon:"error",title:i.data.message})})},getProducts(s=1){this.isLoading=!0;const n=`${k}/api/${I}/products?page=${s}`;this.$http.get(n).then(i=>{this.products=i.data.products,this.pagination=i.data.pagination,this.isLoading=!1}).catch(i=>{x.fire({title:i.data.message,icon:"error",timer:1500,showConfirmButton:!1})})},selectItem(s){this.selectedItem=s},...f(N,["addToCart"]),...f(w,["addToSave"])},computed:{...E(w,["savelist","isProductSaved"])},components:{FooterBanner:B,Pagination:M},mounted(){this.getUserProduct()}},p=s=>(U("data-v-33a3e70f"),s=s(),V(),s),H=p(()=>t("div",{class:"productBox"},[t("div",{class:"productAllbg"})],-1)),$={class:"container"},D={class:"row py-5"},F={class:"col-md-3 col-12"},j={class:"bg-white shadow border-0 rounded-3 justify-content-start text-start py-md-4 py-3 px-4 my-md-0 mt-2 mb-4"},q=p(()=>t("h3",{class:"fw-bold text-start"},"主題選擇",-1)),z=p(()=>t("hr",null,null,-1)),O={class:"px-0 d-flex flex-wrap my-0 list-unstyled"},G=["onClick"],J={class:"col-md-9 col-12"},K={class:"row"},Q={class:"card mb-4"},W={class:"overflow-hidden productImg position-relative rounded-top img-box"},X=["src","alt"],Y={class:"d-flex position-absolute end-0 bottom-0 pe-2 pb-2"},Z=["onClick"],tt=["onMouseover","onMouseleave"],et={key:1,class:"bi bi-heart-fill fs-4 iconSave"},st={class:"card-body"},ot={class:"card-title text-start h4 fw-bold"},it={class:"row text-start justify-content-between align-items-center"},nt={class:"col-lg-7 col-md-12 col-7"},at={class:"text-decoration-line-through text-black-50 fs-6 pe-2"},rt={class:"text-primary h5 d-sm-inline-block"},ct=["onClick"],lt=p(()=>t("button",{class:"btn btn-primary text-white addBtn",type:"submit"}," 加入購物車 ",-1)),dt=[lt];function ut(s,n,i,pt,o,_){const S=d("VueLoading"),h=d("RouterLink"),P=d("Pagination"),L=d("footer-banner");return a(),r(g,null,[c(S,{active:o.isLoading,"onUpdate:active":n[0]||(n[0]=e=>o.isLoading=e),loader:"bars","can-cancel":!1,"is-full-page":o.fullpage},null,8,["active","is-full-page"]),H,t("div",$,[t("div",D,[t("div",F,[t("div",j,[q,z,t("ul",O,[t("li",null,[c(h,{to:"/products"},{default:m(()=>[t("button",{type:"button",class:v(["btn btn-outline-primary btn-sm me-3 text-start btnHover mb-2",{"btn-primary":o.selectedItem===null,"text-white":o.selectedItem===null}]),onClick:n[1]||(n[1]=e=>_.selectItem(null))}," 全部行程 ",2)]),_:1})]),(a(!0),r(g,null,b(o.categories,e=>(a(),r("li",{class:"list-group-item",key:e},[c(h,{to:`/products?category=${e}`},{default:m(()=>[t("button",{type:"button",class:v(["btn btn-outline-primary btn-sm me-3 text-start btnHover mb-2",{"btn-primary":o.selectedItem===e,"text-white":o.selectedItem===e}]),onClick:l=>_.selectItem(e)},u(e),11,G)]),_:2},1032,["to"])]))),128))])])]),t("div",J,[t("div",K,[(a(!0),r(g,null,b(o.products,e=>(a(),r("div",{class:"col-md-6 d-flex",key:e.id},[t("div",Q,[c(h,{to:`/product/${e.id}`,class:"text-decoration-none"},{default:m(()=>[t("div",W,[t("img",{src:e.imageUrl,class:"card-img-top object-fit-cover",alt:e.title,style:{width:"105%"}},null,8,X),t("div",Y,[t("div",{onClick:y(l=>s.addToSave(e),["prevent"]),class:"rounded-circle btn btn-outline-light border border-2 pb-1"},[s.isProductSaved(e.id)?(a(),r("i",et)):(a(),r("i",{key:0,class:v(["bi bi-heart fs-4 iconSave",{"text-dark":o.isHover[e.id]}]),onMouseover:l=>o.isHover[e.id]=!0,onMouseleave:l=>o.isHover[e.id]=!1},null,42,tt))],8,Z)])]),t("div",st,[t("h5",ot,u(e.title),1),t("div",it,[t("div",nt,[T(" 售價 "),t("span",at," NT"+u(e.origin_price)+"元 ",1),t("div",rt," NT"+u(e.price)+" 元 ",1)]),t("div",{class:"col-lg-5 col-md-12 col-5 text-lg-end text-md-start text-end pt-lg-0 pt-md-3 pt-0",onClick:y(l=>s.addToCart(e.id,s.qty),["prevent"])},dt,8,ct)])])]),_:2},1032,["to"])])]))),128))]),c(P,{pagination:o.pagination,onEmitPages:_.getProducts},null,8,["pagination","onEmitPages"])])])]),c(L)],64)}const bt=C(A,[["render",ut],["__scopeId","data-v-33a3e70f"]]);export{bt as default};
